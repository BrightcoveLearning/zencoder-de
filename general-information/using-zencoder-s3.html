---
title: Verwenden von Zencoder mit S3 
description: Zencoder kann Dateien aus Ihrem Amazon S3-Bucket hochladen und herunterladen. Damit Zencoder Dateien herunterladen kann, müssen sie entweder für Jedermann zugänglich sein oder Ihrem Bucket muss eine Bucket-Richtlinie hinzugefügt werden, die Zencoder-Zugriff gewährt, oder Sie müssen Anmeldeinformationen in Ihrem Konto für den Zugriff auf den Bucket speichern.
parent: General Information
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

	<section class="bcls-section">
		<h2 id="Introduction">Einführung</h2>
		<p>Zencoder kann Dateien aus Ihrem Amazon S3-Bucket hochladen und herunterladen. Damit Zencoder Dateien herunterladen kann, müssen sie entweder für alle zugänglich sein, oder es muss eine Bucket-Richtlinie zu Ihrem Bucket hinzugefügt werden, die Zencoder-Zugriff gewährt, oder Sie müssen Anmeldeinformationen für den Zugriff auf den Bucket in Ihrem Konto speichern.</p>
		<aside class="bcls-aside bcls-aside--information">Beachten Sie, dass Zencoder nur Amazon AWS S3-Buckets unterstützt. <strong>S3-kompatible Storage-Buckets von Nicht-Amazon-Anbietern sind <em>nicht</em> unterstützt.</strong></aside>
	</section>

  <section class="bcls-section">
    <h2 id="Use_credentials">Verwenden Sie Anmeldeinformationen</h2>

    <p>Du kannst speichern <a href="/encoding-settings/general/encoding-settings-general-output-settings.html#credentials">Referenzen</a> auf Ihr Konto, wodurch wir Ihr Konto zum Hochladen von Dateien anstelle unserer verwenden können. Dies bedeutet, dass Ihr Konto der Eigentümer der Datei ist und über alle Rechte und Privilegien verfügt. Sie können die Anmeldeinformationen als Standard für alle Uploads und Downloads festlegen oder sie bei jeder Anforderung referenzieren, aber denken Sie daran, dass sie für ALLE S3-Uploads und Downloads verwendet werden, wenn Sie sie als Standard für S3 festlegen. Im Allgemeinen ist dies kein Problem, aber wenn Sie später in den Bucket eines Drittanbieters hochladen möchten, kann dies zu Problemen führen.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Use_a_bucket_policy">Verwenden Sie eine Bucket-Richtlinie</h2>

    <p>Eine weitere Option ist die Verwendung einer Bucket-Richtlinie, mit der Sie Berechtigungen für alle Dateien in Ihrem Bucket festlegen können. Um loszulegen, besuchen Sie <a href="http://aws.amazon.com/console/">AWS-Konsole</a>. Wählen Sie Ihren Bucket auf der linken Seite des Bildschirms aus und klicken Sie auf "Eigenschaften". Klicken Sie in der letzten Zeile auf "Bucket-Richtlinie hinzufügen". Im Folgenden stellen wir eine Bucket-Richtlinie zusammen, die Sie in das Textfeld Bucket-Richtlinie kopieren.</p>

    <p>Unsere empfohlene Bucket-Richtlinie:</p>

    <pre class="line-numbers">
 <code class="language-json" translate="No">{
"Version": "2012-10-17",
"Id": "ZencoderBucketPolicy",
"Statement": [
  {
      "Sid": "Stmt1295042087538",
      "Effect": "Allow",
      "Principal": {
          "AWS": "arn:aws:iam::395540211253:root"
      },
      "Action": [
      "s3:GetObjectAcl",
      "s3:GetObject",
      "s3:PutObjectAcl",
      "s3:PutObject",
      "s3:ListMultipartUploadParts"
      ],
      "Resource": "arn:aws:s3:::MY-BUCKET/*"
  },
  {
      "Sid": "Stmt1295042087538",
      "Effect": "Allow",
      "Principal": {
          "AWS": "arn:aws:iam::395540211253:root"
      },
      "Action": [
      "s3:ListBucketMultipartUploads",
      "s3:GetBucketLocation"
      ],
      "Resource": "arn:aws:s3:::MY-BUCKET"
  }
]
}</code></pre>
    <aside class="bcls-aside bcls-aside--warning">Beachten Sie, dass Uploads auch bei Verwendung dieser Richtlinie fehlschlagen, wenn der Bucket so eingestellt ist, dass er öffentliche ACLs blockiert:
      <figure class="bcls-figure"><img class="bcls-image" alt="S3 ACL Permissions" src="/assets/images/general-information/acl-policy.png" />
        <figcaption class="bcls-caption--image">S3 ACL-Berechtigungen</figcaption>
      </figure>
    </aside>
    <p>Da ist nur <strong>Eine Änderung müssen Sie vornehmen</strong> zu dieser Bucket-Richtlinie, bevor es los geht.</p>

    <ol>
      <li>Ersetzen Sie MY-EIMER durch den Namen Ihres Eimers. Lassen Sie das / * am Ende der Zeile, da dadurch die Richtlinie auf jede Datei im Bucket angewendet wird.</li>
      <li>Ersetzen Sie optional das Aktionsarray durch die Aktionen, die Sie zulassen möchten. Gültige Aktionen, die Zencoder möglicherweise benötigt, sind:
        <h4>Objektberechtigungen - erstes Aktionsarray im obigen Beispiel</h4>

        <ul>
          <li><code translate="No">s3:PutObject</code>- Zencoder erlauben, Dateien in den Bucket hochzuladen</li>
          <li><code translate="No">s3:GetObject</code>- Zencoder erlauben, Dateien aus dem Bucket herunterzuladen</li>
          <li><code translate="No">s3:GetObjectAcl</code>- Zencoder erlauben, ACL-Berechtigungen für Dateien zu erhalten</li>
          <li><code translate="No">s3:PutObjectAcl</code>- Zencoder erlauben, ACL-Berechtigungen für andere Benutzer für Dateien festzulegen</li>
          <li><code translate="No">s3:ListMultipartUploadParts</code>- Zencoder erlauben, aufzulisten, welche Teile einer mehrteiligen Datei in den Bucket hochgeladen wurden</li>
        </ul>
        <h4>Bucket-Berechtigungen - zweites Aktionsarray im obigen Beispiel</h4>

        <ul>
          <li><code translate="No">s3:GetBucketLocation</code>- Zencoder erlauben, den Standort des Eimers zu ermitteln (USA, EU, Asien usw.)</li>
          <li><code translate="No">s3:ListBucketMultipartUploads</code>- Zencoder erlauben, alle mehrteiligen Uploads anzuzeigen, die derzeit im Bucket stattfinden
            <p><code translate="No">ex:</code> Wenn Zencoder Dateien herunterladen und hochladen kann, ersetzen Sie das erste Aktionsarray durch:</p>

            <pre class="line-numbers">
<code class="language-json" translate="No">["s3:PutObject", "s3:GetObject"]</code></pre>
          </li>
        </ul>
      </li>
    </ol>
    <p>Beachten Sie, dass die Richtlinie zwei Anweisungen enthält. Die erste Anweisung betrifft Schlüssel innerhalb des Buckets, während der zweite Teil den Bucket selbst betrifft.</p>

    <p>Der Rest der Richtlinie kann in Ruhe gelassen werden und funktioniert einwandfrei. Die Dokumentation von Amazon enthält weitere Informationen zu <a href="http://docs.amazonwebservices.com/AmazonS3/latest/dev/index.html?UsingBucketPolicies.html">Elemente einer Bucket-Richtlinie.</a></p>

    <p>Zencoder kann auch ACL-Berechtigungen für die Videos und Miniaturansichten festlegen, die wir für Sie erstellen. Dies ist in unserem Dokument dokumentiert <a href="/encoding-settings/sources-destinations/encoding-settings-s3-settings.html">S3 API-Dokumente</a>.</p>

    <p><strong>Hinweis:</strong> Wenn Sie eine Bucket-Richtlinie verwenden, sollten Sie immer URLs im s3: //BUCKET/KEY-Format verwenden, damit Zencoder sie sicher als S3-URLs identifiziert und die Anforderung entsprechend signiert.</p>

    <p>Wenn Sie Ihre eigene Bucket-Richtlinie erstellen möchten, können Sie diese verwenden <a href="http://awspolicygen.s3.amazonaws.com/policygen.html">Amazon Policy Generator</a>. Benutzen <em>arn:aws:iam። 395540211253:root</em> als AWS-Prinzipal, um Zencoder-Zugriff zu ermöglichen.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Specific_files">Bestimmte Dateien</h2>

    <h3>Kann ich bestimmten Dateien nur die Berechtigung erteilen?</h3>

    <p>Das kannst du definitiv. Während der Bucket Policy-Ansatz im Allgemeinen einfacher und schneller ist, funktioniert er nicht für alle. Wenn Sie es sind, können Sie unserem Amazon AWS-Konto Berechtigungen erteilen. <code translate="No">aws@zencoder.com</code>.</p>

    <p>Wenn Sie stattdessen unsere kanonische ID verwenden müssen, können Sie diese verwenden <code translate="No">6c8583d84664a381db0c6af0e79b285ede571885fbe768e7ea50e5d3760597dd</code>.</p>
  </section>
  <section class="bcls-section">
    <h2>Fehlerbehebung</h2>

    <h3 id="Troubleshooting">Ich bekomme immer noch die Erlaubnis verweigert!</h3>

    <p>S3 antwortet mit "Zugriff verweigert", wenn der Zugriff verweigert wird oder wenn die Datei nicht gefunden wird. Wenn Sie der Meinung sind, dass Sie Ihre S3-Anmeldeinformationen oder Ihre Bucket-Richtlinie korrekt eingerichtet haben, aber weiterhin die Fehlermeldung "Zugriff verweigert" erhalten, überprüfen Sie die von Ihnen übermittelte URL. Wenn die Eingabe so aussieht <code translate="No">"s3://my-bucket/this+file+is+great.mp4"</code> Es besteht eine gute Chance, dass Sie tatsächlich wollen <code translate="No">"s3://my-bucket/this file is great.mp4"</code></p>

    <h3>Bei der Nutzung der EU-Region Frankfurt wird eine Fehlermeldung angezeigt!</h3>

    <p>Um die Region EU Frankfurt mit Zencoder nutzen zu können, müssen Sie S3-URLs generieren, die den Regionsnamen enthalten. Erstellen Sie dazu einfach URLs wie diese <code translate="No">"s3+eu-central-1://my-bucket/file.mp4"</code>.</p>
  </section>
</article>